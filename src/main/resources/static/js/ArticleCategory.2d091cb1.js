(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ArticleCategory"],{"0916":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("hr"),a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.append({key:0})}}},[t._v("添加顶级菜单")]),t.categorys.length?a("a-tree",{attrs:{showLine:"",defaultExpandAll:"",treeData:t.categorys},scopedSlots:t._u([{key:"custom",fn:function(e){return[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.preview(e)}}},[t._v(t._s(e.title))]),t._v(" | "),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.findArticle(e)}}},[t._v("点击查看")]),a("a-button",{staticClass:"but_type",staticStyle:{right:"200px"},attrs:{type:"primary"},on:{click:function(){return t.append(e)}}},[t._v("新增")]),a("a-button",{staticClass:"but_type",staticStyle:{right:"120px"},attrs:{type:"primary"},on:{click:function(){return t.edit(e)}}},[t._v("编辑")]),a("a-button",{staticClass:"but_type",attrs:{type:"primary"},on:{click:function(a){return t.remove(e)}}},[t._v("删除")])]}}],null,!1,2943828225)}):t._e(),a("a-modal",{attrs:{title:"添加分类"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form",{attrs:{layout:"horizontal"}},[a("a-form-item",{attrs:{label:"视图的名称",help:"不输入.默认生成"}},[a("a-input",{model:{value:t.categoryParam.viewName,callback:function(e){t.$set(t.categoryParam,"viewName",e)},expression:"categoryParam.viewName"}})],1),a("a-form-item",{attrs:{label:"分类名称"}},[a("a-input",{model:{value:t.categoryParam.name,callback:function(e){t.$set(t.categoryParam,"name",e)},expression:"categoryParam.name"}})],1),a("a-form-item",{attrs:{label:"选择模板"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.categoryParam.templateId,callback:function(e){t.$set(t.categoryParam,"templateId",e)},expression:"categoryParam.templateId"}},t._l(t.templates,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("a-form-item",{attrs:{label:"描述"}},[a("a-textarea",{model:{value:t.categoryParam.description,callback:function(e){t.$set(t.categoryParam,"description",e)},expression:"categoryParam.description"}})],1),a("a-form-item",{attrs:{label:"是否需要静态化"}},[a("a-radio-group",{attrs:{defaultValue:"1"},model:{value:t.categoryParam.haveHtml,callback:function(e){t.$set(t.categoryParam,"haveHtml",e)},expression:"categoryParam.haveHtml"}},[a("a-radio",{attrs:{value:1}},[t._v("是")]),a("a-radio",{attrs:{value:0}},[t._v("否")])],1)],1)],1)],1),a("a-drawer",{attrs:{title:"查看分类目录下文章",placement:"right",closable:!1,visible:t.articleVisible,width:"30rem"},on:{close:t.onClose}},[a("a-form",[a("a-form-item",{attrs:{label:"分类名称"}},[a("span",[t._v(t._s(t.articles.name))])]),a("a-form-item",{attrs:{label:"静态文件路径"}},[a("span",[t._v(t._s(t.articles.viewName))])]),a("a-form-item",{attrs:{label:"描述"}},[a("span",[t._v(t._s(t.articles.description))])])],1),t._l(t.articles.articleVOList,(function(e){return a("p",{key:e.id},[t._v(t._s(e.title))])}))],2)],1)},n=[],i=(a("b0c0"),a("c405")),c=a("c621"),o=a("5c07"),s={data:function(){return{form:this.$form.createForm(this,{name:"123"}),categorys:[],value:"",articleVisible:!1,templates:[],isUpdate:!1,updateId:"",visible:!1,articles:[],categoryParam:{parentId:"",name:"",templateId:2,viewName:"",description:"",haveHtml:0}}},created:function(){this.loadcategory()},methods:{loadTempalte:function(){var t=this;c["a"].findByType("CATEGORY").then((function(e){t.templates=e.data.data}))},loadcategory:function(){var t=this;i["a"].list().then((function(e){t.categorys=i["a"].concreteTree(e.data.data)}))},handleOk:function(){var t=this;this.categoryParam.name?(this.isUpdate?i["a"].update(this.updateId,this.categoryParam).then((function(e){t.$notification["success"]({message:"成功更新数据:"+e.data.data.name})})):(i["a"].add(this.categoryParam).then((function(e){t.$notification["success"]({message:"成功添加:"+e.data.data.name})})),this.loadcategory()),this.visible=!1):this.$notification["error"]({message:"分类标题不能为空!!"})},append:function(t){this.loadTempalte(),this.isUpdate=!1,this.categoryParam.parentId=t.key,this.visible=!0},edit:function(t){var e=this;this.loadTempalte(),this.isUpdate=!0,this.updateId=t.key,i["a"].findById(t.key).then((function(t){console.log(t),console.log(t.data.data.templateId),e.categoryParam=t.data.data,e.categoryParam.haveHtml=0,e.visible=!0}))},remove:function(t){console.log(t)},preview:function(t){window.open(o["a"].Online("category",t.key),"_blank")},findArticle:function(t){var e=this;this.articleVisible=!0,i["a"].findByCategoryDetail(t.key).then((function(t){var a=t.data.data;console.log(a),e.articles=a,0==a.articleVOList.length?e.$notification["success"]({message:"该分类目录下没有文章"}):e.$notification["success"]({message:"该分类目录下有文章["+a.articleVOList.length+"]篇"})}))},onClose:function(){this.articleVisible=!1}}},l=s,u=(a("1dda"),a("2877")),f=Object(u["a"])(l,r,n,!1,null,null,null);e["default"]=f.exports},"159b":function(t,e,a){var r=a("da84"),n=a("fdbc"),i=a("17c2"),c=a("9112");for(var o in n){var s=r[o],l=s&&s.prototype;if(l&&l.forEach!==i)try{c(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,n=a("a640"),i=a("ae40"),c=n("forEach"),o=i("forEach");t.exports=c&&o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1c7e5":function(t,e,a){},"1dda":function(t,e,a){"use strict";var r=a("1c7e5"),n=a.n(r);n.a},"1dde":function(t,e,a){var r=a("d039"),n=a("b622"),i=a("2d00"),c=n("species");t.exports=function(t){return i>=51||!r((function(){var e=[],a=e.constructor={};return a[c]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4160:function(t,e,a){"use strict";var r=a("23e7"),n=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"5c07":function(t,e,a){"use strict";a("99af");var r={Online:function(t,e){return"http://localhost:8080/".concat(t,"/preview/").concat(e)},Html:function(t){return"http://localhost:8080/".concat(t,".html")}};e["a"]=r},"65f0":function(t,e,a){var r=a("861d"),n=a("e8b5"),i=a("b622"),c=i("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[c],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},8418:function(t,e,a){"use strict";var r=a("c04e"),n=a("9bf2"),i=a("5c6c");t.exports=function(t,e,a){var c=r(e);c in t?n.f(t,c,i(0,a)):t[c]=a}},"99af":function(t,e,a){"use strict";var r=a("23e7"),n=a("d039"),i=a("e8b5"),c=a("861d"),o=a("7b0b"),s=a("50c4"),l=a("8418"),u=a("65f0"),f=a("1dde"),d=a("b622"),m=a("2d00"),p=d("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",y=m>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=f("concat"),g=function(t){if(!c(t))return!1;var e=t[p];return void 0!==e?!!e:i(t)},k=!y||!b;r({target:"Array",proto:!0,forced:k},{concat:function(t){var e,a,r,n,i,c=o(this),f=u(c,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?c:arguments[e],g(i)){if(n=s(i.length),d+n>h)throw TypeError(v);for(a=0;a<n;a++,d++)a in i&&l(f,d,i[a])}else{if(d>=h)throw TypeError(v);l(f,d++,i)}return f.length=d,f}})},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,a){var r=a("83ab"),n=a("d039"),i=a("5135"),c=Object.defineProperty,o={},s=function(t){throw t};t.exports=function(t,e){if(i(o,t))return o[t];e||(e={});var a=[][t],l=!!i(e,"ACCESSORS")&&e.ACCESSORS,u=i(e,0)?e[0]:s,f=i(e,1)?e[1]:void 0;return o[t]=!!a&&!n((function(){if(l&&!r)return!0;var t={length:-1};l?c(t,1,{enumerable:!0,get:s}):t[1]=1,a.call(t,u,f)}))}},b0c0:function(t,e,a){var r=a("83ab"),n=a("9bf2").f,i=Function.prototype,c=i.toString,o=/^\s*function ([^ (]*)/,s="name";!r||s in i||n(i,s,{configurable:!0,get:function(){try{return c.call(this).match(o)[1]}catch(t){return""}}})},b727:function(t,e,a){var r=a("0366"),n=a("44ad"),i=a("7b0b"),c=a("50c4"),o=a("65f0"),s=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,u=4==t,f=6==t,d=5==t||f;return function(m,p,h,v){for(var y,b,g=i(m),k=n(g),L=r(p,h,3),S=c(k.length),_=0,P=v||o,w=e?P(m,S):a?P(m,0):void 0;S>_;_++)if((d||_ in k)&&(y=k[_],b=L(y,_,g),t))if(e)w[_]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return _;case 2:s.call(w,y)}else if(u)return!1;return f?-1:l||u?u:w}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},c405:function(t,e,a){"use strict";a("4160"),a("b0c0"),a("159b");var r=a("9efd"),n="/api/category",i={};function c(t,e){e.forEach((function(e){t.key===e.parentId&&(t.children||(t.children=[]),t.children.push({key:e.id,title:e.name,isLeaf:!1,scopedSlots:{title:"custom"}}))})),t.children?t.children.forEach((function(t){return c(t,e)})):t.isLeaf=!0}i.list=function(){return Object(r["a"])({url:n,method:"get"})},i.add=function(t){return Object(r["a"])({url:n,method:"post",data:t})},i.update=function(t,e){return Object(r["a"])({url:"".concat(n,"/update/").concat(t),method:"post",data:e})},i.findById=function(t){return Object(r["a"])({url:"".concat(n,"/find/").concat(t),method:"get"})},i.findArticleById=function(t){return Object(r["a"])({url:"".concat(n,"/find/article/").concat(t),method:"get"})},i.findByCategoryDetail=function(t){return Object(r["a"])({url:"".concat(n,"/find/categoryDetail/").concat(t),method:"get"})},i.concreteTree=function(t){var e={key:0,title:"top",children:[]};return c(e,t),e.children},e["a"]=i},c621:function(t,e,a){"use strict";var r=a("9efd"),n="/api/template",i={findByType:function(t){return Object(r["a"])({url:"".concat(n,"/find/").concat(t),method:"get"})},list:function(t){return Object(r["a"])({url:n,param:t,method:"get"})},create:function(t){return Object(r["a"])({url:n,data:t,method:"post"})}};e["a"]=i},e8b5:function(t,e,a){var r=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=ArticleCategory.2d091cb1.js.map