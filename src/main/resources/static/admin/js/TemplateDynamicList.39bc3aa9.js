(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TemplateDynamicList"],{b0c0:function(t,e,a){var n=a("83ab"),i=a("9bf2").f,o=Function.prototype,r=o.toString,c=/^\s*function ([^ (]*)/,s="name";!n||s in o||i(o,s,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return""}}})},c621:function(t,e,a){"use strict";a("99af");var n=a("9efd"),i=a("72ac"),o="/api/template",r={update:function(t,e){return Object(n["a"])({url:"".concat(o,"/update/").concat(t),data:e,method:"post"})},findDetailsById:function(t){return Object(n["a"])({url:"".concat(o,"/findDetailsById/").concat(t),method:"get"})},findByType:function(t){return Object(n["a"])({url:"".concat(o,"/find/").concat(t),method:"get"})},tree:function(t){return Object(n["a"])({url:"".concat(o,"/tree/").concat(t),method:"get"})},deleteById:function(t){return Object(n["a"])({url:"".concat(o,"/delete/").concat(t),method:"get"})},list:function(t){return Object(n["a"])({url:o,params:t,method:"get"})},add:function(t){return Object(n["a"])({url:o,data:t,method:"post"})},upload:function(){return"http://".concat(i["a"].baseUrl,":").concat(i["a"].port,"/api/template/upload")}};e["a"]=r},dd38:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-upload",{attrs:{name:"file",multiple:!0,action:t.upload,headers:t.headers},on:{change:t.uploadAttachment}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 安装模板 ")],1)],1),a("a-table",{attrs:{columns:t.columns,dataSource:t.template,pagination:!1,rowKey:function(t){return t.id}},scopedSlots:t._u([{key:"status",fn:function(e,n){return a("div",{},[a("a-switch",{attrs:{defaultChecked:""},on:{change:function(e){return t.onChangeStatus(n.id)}},model:{value:n.tree,callback:function(e){t.$set(n,"tree",e)},expression:"record.tree"}})],1)}},{key:"name",fn:function(e,n){return a("div",{},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.preview(n.id)}}},[t._v(t._s(e))])])}},{key:"action",fn:function(e){return a("span",{},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.deleteById(e.id)}}},[t._v("删除")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.edit(e.id)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.handleShowPostSettings(e)}}},[t._v("设置")])],1)}}])}),a("div",{staticClass:"page-wrapper",style:{textAlign:"right"}},[a("a-pagination",{staticClass:"pagination",attrs:{current:t.pagination.page,total:t.pagination.total,defaultPageSize:t.pagination.size,pageSizeOptions:["1","2","5","10","20","50","100"],showSizeChanger:""},on:{showSizeChange:t.handlePaginationChange,change:t.handlePaginationChange}})],1)],1)},i=[],o=(a("b0c0"),a("5c07")),r=a("c621"),c=[{title:"模板名称",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"英文名称",key:"enName",dataIndex:"enName"},{title:"模板类型",dataIndex:"templateType",key:"templateType"},{title:"视图路径",dataIndex:"templateValue",key:"templateValue"},{title:"是否使用Tree",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createDate",key:"createDate"},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],s={data:function(){return{pagination:{page:1,size:5,sort:null},queryParam:{page:0,size:10,sort:null,keyword:null,categoryId:null,status:null},columns:c,article:[],template:[],attachmentUploadVisible:!1}},computed:{headers:function(){var t=localStorage.getItem("Authorization");return{Authorization:"Bearer "+t}}},created:function(){this.loadTemplate()},methods:{loadTemplate:function(){var t=this;this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort,r["a"].list(this.queryParam).then((function(e){t.template=e.data.data.content,t.pagination.total=e.data.data.totalElements}))},handlePaginationChange:function(t,e){this.pagination.page=t,this.pagination.size=e,this.loadTemplate()},onChangeStatus:function(t){var e=this;r["a"].tree(t).then((function(t){e.$notification["success"]({message:"操作"+t.data.message})}))},edit:function(t){this.$router.push({name:"TemplateCreate",query:{id:t}})},deleteById:function(t){var e=this;r["a"].deleteById(t).then((function(t){e.$notification["success"]({message:t.data.message}),e.loadTemplate()}))},upload:function(){return r["a"].upload()},uploadAttachment:function(t){"done"===t.file.status?this.$message.success("".concat(t.file.name," file uploaded successfully")):"error"===t.file.status&&this.$message.error("".concat(t.file.response.message," file upload failed.")),this.loadTemplate()},preview:function(t){window.open(o["a"].Online("template",t),"_blank")}}},u=s,l=a("2877"),d=Object(l["a"])(u,n,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=TemplateDynamicList.39bc3aa9.js.map