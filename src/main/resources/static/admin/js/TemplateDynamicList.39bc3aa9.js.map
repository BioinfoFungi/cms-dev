{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/api/template.js","webpack:///./src/views/template/TemplateDynamicList.vue?71a4","webpack:///src/views/template/TemplateDynamicList.vue","webpack:///./src/views/template/TemplateDynamicList.vue?74a9","webpack:///./src/views/template/TemplateDynamicList.vue"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","baseUrl","templateApi","id","templatePageParam","service","url","data","method","type","params","Golbal","port","render","_vm","_h","$createElement","_c","_self","attrs","upload","headers","on","uploadAttachment","_v","columns","template","scopedSlots","_u","key","fn","status","record","$event","onChangeStatus","model","value","callback","$$v","$set","expression","name","preview","_s","deleteById","edit","handleShowPostSettings","staticClass","style","textAlign","pagination","page","total","size","handlePaginationChange","staticRenderFns","sort","queryParam","keyword","categoryId","article","attachmentUploadVisible","computed","token","localStorage","getItem","Authorization","created","loadTemplate","methods","pageSize","message","resp","$router","push","query","response","info","file","$message","success","window","open","component"],"mappings":"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","file":"js/TemplateDynamicList.39bc3aa9.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","import service from '@/utils/service'\nimport Golbal from '@/api/global_variable.js'\nconst baseUrl = '/api/template'\n\nconst templateApi = {}\n\ntemplateApi.update = (id,templatePageParam) => {\n    return service({\n        url: `${baseUrl}/update/${id}`,\n        data: templatePageParam,\n        method: 'post'\n    })\n}\ntemplateApi.findDetailsById = (id) => {\n    return service({\n        url: `${baseUrl}/findDetailsById/${id}`,\n        method: 'get'\n    })\n}\n\ntemplateApi.findByType = (type) => {\n    return service({\n        url: `${baseUrl}/find/${type}`,\n        method: 'get'\n    })\n}\n\ntemplateApi.tree = id => {\n    return service({\n        url: `${baseUrl}/tree/${id}`,\n        method: 'get'\n    })\n}\n\ntemplateApi.deleteById = id => {\n    return service({\n        url: `${baseUrl}/delete/${id}`,\n        method: 'get'\n    })\n}\n\n\ntemplateApi.list =(params)=>{\n    return service({\n        url:baseUrl,\n        params:params,\n        method:'get'\n    })\n}\ntemplateApi.add = (params) => {\n    return service({\n        url: baseUrl,\n        data: params,\n        method: 'post'\n    })\n}\ntemplateApi.upload=()=>{\n    return `http://${Golbal.baseUrl}:${Golbal.port}/api/template/upload`\n  }\n\nexport default templateApi","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-upload',{attrs:{\"name\":\"file\",\"multiple\":true,\"action\":_vm.upload,\"headers\":_vm.headers},on:{\"change\":_vm.uploadAttachment}},[_c('a-button',[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\" 安装模板 \")],1)],1),_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.template,\"pagination\":false,\"rowKey\":function (template) { return template.id; }},scopedSlots:_vm._u([{key:\"status\",fn:function(status, record){return _c('div',{},[_c('a-switch',{attrs:{\"defaultChecked\":\"\"},on:{\"change\":function($event){return _vm.onChangeStatus(record.id)}},model:{value:(record.tree),callback:function ($$v) {_vm.$set(record, \"tree\", $$v)},expression:\"record.tree\"}})],1)}},{key:\"name\",fn:function(name, record){return _c('div',{},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.preview(record.id)}}},[_vm._v(_vm._s(name))])])}},{key:\"action\",fn:function(record){return _c('span',{},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.deleteById(record.id)}}},[_vm._v(\"删除\")]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.edit(record.id)}}},[_vm._v(\"编辑\")]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.handleShowPostSettings(record)}}},[_vm._v(\"设置\")])],1)}}])}),_c('div',{staticClass:\"page-wrapper\",style:({ textAlign: 'right' })},[_c('a-pagination',{staticClass:\"pagination\",attrs:{\"current\":_vm.pagination.page,\"total\":_vm.pagination.total,\"defaultPageSize\":_vm.pagination.size,\"pageSizeOptions\":['1', '2', '5', '10', '20', '50', '100'],\"showSizeChanger\":\"\"},on:{\"showSizeChange\":_vm.handlePaginationChange,\"change\":_vm.handlePaginationChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- <a-button @click=\"() => (attachmentUploadVisible = true)\"\n      >上传附件</a-button\n    > -->\n\n    <!-- <form action=\"http://localhost:8080/api/template/upload\" method=\"post\"  enctype=\"multipart/form-data\">  \n        <p>选择文件:<input type=\"file\" name=\"file\"></p>\n        <p>选择文件:<input type=\"file\" name=\"file\"></p>\n        <p><input type=\"submit\" value=\"提交\"></p>\n    </form>   -->\n\n    <a-upload\n      name=\"file\"\n      :multiple=\"true\"\n      :action=\"upload\"\n      @change=\"uploadAttachment\"\n      :headers=\"headers\"\n    >\n      <a-button> <a-icon type=\"upload\" /> 安装模板 </a-button>\n    </a-upload>\n\n    <a-table\n      :columns=\"columns\"\n      :dataSource=\"template\"\n      :pagination=\"false\"\n      :rowKey=\"(template) => template.id\"\n    >\n      <div slot=\"status\" slot-scope=\"status, record\">\n        <a-switch\n          defaultChecked\n          @change=\"onChangeStatus(record.id)\"\n          v-model=\"record.tree\"\n        />\n      </div>\n\n      \n      <div slot=\"name\" slot-scope=\"name, record\">\n        <a href=\"javascript:;\" @click=\"preview(record.id)\">{{ name }}</a>\n      </div>\n\n      <span slot=\"action\" slot-scope=\"record\">\n        <a href=\"javascript:;\" @click=\"deleteById(record.id)\">删除</a>\n        <a-divider type=\"vertical\" />\n        <a href=\"javascript:;\" @click=\"edit(record.id)\">编辑</a>\n        <a-divider type=\"vertical\" />\n        <a href=\"javascript:;\" @click=\"handleShowPostSettings(record)\">设置</a>\n      </span>\n    </a-table>\n    <div class=\"page-wrapper\" :style=\"{ textAlign: 'right' }\">\n      <a-pagination\n        class=\"pagination\"\n        :current=\"pagination.page\"\n        :total=\"pagination.total\"\n        :defaultPageSize=\"pagination.size\"\n        :pageSizeOptions=\"['1', '2', '5', '10', '20', '50', '100']\"\n        showSizeChanger\n        @showSizeChange=\"handlePaginationChange\"\n        @change=\"handlePaginationChange\"\n      />\n    </div>\n\n    <!-- <a-modal title=\"附件上传\" v-model=\"attachmentUploadVisible\">\n      <a-upload-dragger\n        name=\"file\"\n        :multiple=\"true\"\n        :action=\"upload\"\n        @change=\"uploadAttachment\"\n        :headers=\"headers\"\n        :withCredentials=\"true\"\n      >\n        <p class=\"ant-upload-drag-icon\">\n          <img :src=\"queryParam.picPath\" width=\"100%\" alt srcset />\n        </p>\n        <p class=\"ant-upload-text\">Click or drag file to this area to upload</p>\n        <p class=\"ant-upload-hint\">\n          Support for a single or bulk upload. Strictly prohibit from uploading\n          company data or other band files\n        </p>\n      </a-upload-dragger>\n    </a-modal> -->\n  </div>\n</template>\n<script>\nconst columns = [\n  {\n    title: \"模板名称\",\n    dataIndex: \"name\",\n    key: \"name\",\n    scopedSlots: { customRender: \"name\" },\n  },\n\n  {\n    title: \"英文名称\",\n    key: \"enName\",\n    dataIndex: \"enName\",\n  },\n  {\n    title: \"模板类型\",\n    dataIndex: \"templateType\",\n    key: \"templateType\",\n  },\n  {\n    title: \"视图路径\",\n    dataIndex: \"templateValue\",\n    key: \"templateValue\",\n  },\n  {\n    title: \"是否使用Tree\",\n    dataIndex: \"status\",\n    key: \"status\",\n    scopedSlots: { customRender: \"status\" },\n  },\n  {\n    title: \"创建时间\",\n    dataIndex: \"createDate\",\n    key: \"createDate\",\n  },\n  {\n    title: \"Action\",\n    key: \"action\",\n    scopedSlots: { customRender: \"action\" },\n  },\n];\nimport preview from \"@/api/preview.js\";\nimport TemplateApi from \"@/api/template.js\";\nexport default {\n  data() {\n    return {\n      pagination: {\n        page: 1,\n        size: 5,\n        sort: null,\n      },\n      queryParam: {\n        page: 0,\n        size: 10,\n        sort: null,\n        keyword: null,\n        categoryId: null,\n        status: null,\n      },\n      columns,\n      article: [],\n      template: [],\n      attachmentUploadVisible: false,\n    };\n  },\n  computed: {\n    headers() {\n      var token = localStorage.getItem(\"Authorization\");\n      return {\n        Authorization: \"Bearer \" + token,\n      };\n    },\n  },\n  created() {\n    this.loadTemplate();\n  },\n  methods: {\n    loadTemplate() {\n      this.queryParam.page = this.pagination.page - 1;\n      this.queryParam.size = this.pagination.size;\n      this.queryParam.sort = this.pagination.sort;\n      TemplateApi.list(this.queryParam).then((response) => {\n        this.template = response.data.data.content;\n        this.pagination.total = response.data.data.totalElements;\n        // console.log(response);\n      });\n    },\n    handlePaginationChange(page, pageSize) {\n      // console.log(\"111\")\n      // this.$log.debug(`Current: ${page}, PageSize: ${pageSize}`)\n      this.pagination.page = page;\n      this.pagination.size = pageSize;\n      this.loadTemplate();\n    },\n    onChangeStatus(id) {\n      // console.log(id)\n      TemplateApi.tree(id).then((resp) => {\n        this.$notification[\"success\"]({\n          message: \"操作\" + resp.data.message,\n        });\n      });\n    },\n    edit(id) {\n      this.$router.push({\n        name: \"TemplateCreate\",\n        query: { id: id },\n      });\n      // templatePageApi.findDetailsById(id).then(resp => {\n      //   console.log(resp);\n      // });\n    },\n    deleteById(value) {\n      TemplateApi.deleteById(value).then((response) => {\n        //  console.log(response);\n        this.$notification[\"success\"]({\n          message: response.data.message,\n        });\n        this.loadTemplate();\n      });\n    },\n    upload() {\n      return TemplateApi.upload();\n    },\n    uploadAttachment(info) {\n      // if (info.file.status !== \"uploading\") {\n      //   console.log(info.file, info.fileList);\n      // }\n      if (info.file.status === \"done\") {\n        this.$message.success(`${info.file.name} file uploaded successfully`);\n        // console.log(info.file.response)\n      } else if (info.file.status === \"error\") {\n        this.$message.error(\n          `${info.file.response.message} file upload failed.`\n        );\n        // console.log(info.file.response.message)\n      }\n      this.loadTemplate();\n    },\n    preview(value) {\n      // console.log(value.templateValue)\n      // window.open(preview.Html(value), \"_blank\");\n      window.open(preview.Online(\"template\", value), \"_blank\");\n    },\n    // handleEditClick(template) {\n    //   console.log(template);\n    // },\n    // handleShowPostSettings(template) {\n    //   console.log(template);\n    // }\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TemplateDynamicList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TemplateDynamicList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TemplateDynamicList.vue?vue&type=template&id=e27f0732&\"\nimport script from \"./TemplateDynamicList.vue?vue&type=script&lang=js&\"\nexport * from \"./TemplateDynamicList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}