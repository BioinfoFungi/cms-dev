(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["systemMenu"],{"5d8a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-button",{on:{click:e.addMenu}},[e._v("添加菜单")]),n("a-button",{attrs:{type:"primary"},on:{click:e.updateCategoryPos}},[e._v("更新顺序")]),e.menu.id?n("div",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteMenu(e.menu)}}},[e._v("删除")]),n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.edit(e.menu)}}},[e._v("更新")])]):e._e(),n("a-tree",{staticClass:"draggable-tree",attrs:{draggable:"","block-node":"","tree-data":e.menus,"replace-fields":e.fieldNames},on:{dragenter:e.onDragEnter,select:e.onSelect,drop:e.onDropCategory}}),n("a-modal",{attrs:{title:"添加分类"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form",[n("a-form-item",{attrs:{label:"菜单名称"}},[n("a-input",{model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1),n("a-form-item",{attrs:{label:"菜单的路径"}},[n("a-input",{model:{value:e.queryParam.urlName,callback:function(t){e.$set(e.queryParam,"urlName",t)},expression:"queryParam.urlName"}})],1),n("a-form-item",{attrs:{label:"icon"}},[n("a-input",{model:{value:e.queryParam.icon,callback:function(t){e.$set(e.queryParam,"icon",t)},expression:"queryParam.icon"}})],1)],1)],1)],1)},i=[],o=(n("4160"),n("a434"),n("a9e3"),n("ac1f"),n("1276"),n("159b"),n("2909")),r=(n("b0c0"),n("9efd")),u="/api/menu",s={};function c(e,t){t.forEach((function(t){e.key===t.parentId&&(e.children||(e.children=[]),e.children.push({key:t.id,title:t.name,isLeaf:!1,scopedSlots:{title:"custom"}}))})),e.children?e.children.forEach((function(e){return c(e,t)})):e.isLeaf=!0}s.listVoTree=function(){return Object(r["a"])({url:"".concat(u,"/listVoTree"),method:"get"})},s.updatePos=function(e){return Object(r["a"])({url:"".concat(u,"/updatePos"),method:"post",data:e})},s.list=function(){return Object(r["a"])({url:u,method:"get"})},s.delete=function(e){return Object(r["a"])({url:"".concat(u,"/delete/").concat(e),method:"get"})},s.add=function(e){return Object(r["a"])({url:u,method:"post",data:e})},s.update=function(e,t){return Object(r["a"])({url:"".concat(u,"/update/").concat(e),method:"post",data:t})},s.findById=function(e){return Object(r["a"])({url:"".concat(u,"/find/").concat(e),method:"get"})},s.concreteTree=function(e){var t={key:0,title:"top",children:[]};return c(t,e),t.children};var d=s,l={data:function(){return{menus:[],menu:{},visible:!1,isUpdate:!0,updateId:"",queryParam:{name:"",urlName:"",icon:"",parentId:"",status:!0,target:"_blank"},fieldNames:{children:"children",title:"name",key:"id"}}},created:function(){this.loadMenu()},methods:{loadMenu:function(){var e=this;d.listVoTree().then((function(t){e.menus=t.data.data}))},addMenu:function(){this.isUpdate=!1,this.visible=!0},edit:function(e){this.isUpdate=!0,this.visible=!0,this.updateId=e.id,this.queryParam=this.menu},deleteMenu:function(e){var t=this;d.delete(e.id).then((function(e){t.$notification["success"]({message:e.data.message}),t.loadMenu()}))},updateMenu:function(e){var t=this;d.update(e.id,this.queryParam).then((function(e){t.$notification["success"]({message:e.data.message})}))},onSelect:function(e){var t=this;d.findById(e).then((function(e){t.menu=e.data.data}))},updateCategoryPos:function(){var e=this;d.updatePos(this.menus).then((function(t){e.loadMenu(),e.$notification["success"]({message:"顺序更新"+t.data.message})}))},onDragEnter:function(){},onDropCategory:function(e){this.onDrop(e,"menus","children")},onDrop:function(e,t,n){var a=e.node.eventKey,i=e.dragNode.eventKey,r=e.node.pos.split("-"),u=e.dropPosition-Number(r[r.length-1]),s=function e(t,a,i){t.forEach((function(t,o,r){return t.id===a?i(t,o,r):t[n]?e(t[n],a,i):void 0}))},c=Object(o["a"])(this[t]),d={};if(s(c,i,(function(e,t,n){n.splice(t,1),d=e})),e.dropToGap)if((e.node[n]||[]).length>0&&e.node.expanded&&1===u)s(c,a,(function(e){e[n]=e[n]||[],e[n].unshift(d)}));else{var l=[],f=0;s(c,a,(function(e,t,n){l=n,f=t})),-1===u?l.splice(f,0,d):l.splice(f+1,0,d)}else s(c,a,(function(e){e[n]=e[n]||[],e[n].push(d)}));this[t]=c},handleOk:function(){var e=this;this.isUpdate?d.update(this.updateId,this.queryParam).then((function(t){e.$notification["success"]({message:t.data.message}),e.loadMenu(),e.visible=!1})):d.add(this.queryParam).then((function(t){e.$notification["success"]({message:t.data.message}),e.loadMenu(),e.visible=!1}))}}},f=l,m=n("2877"),h=Object(m["a"])(f,a,i,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=systemMenu.9ae73b71.js.map