(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["articleChannel"],{"1c93":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-tabs",{attrs:{defaultActiveKey:"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"界面"}},[a("a-table",{staticClass:"table",attrs:{columns:e.columns,dataSource:e.channels,pagination:!1,rowKey:function(e){return e.id},size:"small",scroll:{x:1500}},scopedSlots:e._u([{key:"name",fn:function(t,n){return a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.preview(n.id)}}},[e._v(e._s(t))])}},{key:"viewName",fn:function(t,n){return a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.openHtml(n)}}},[e._v(e._s(t))])}},{key:"existNav",fn:function(t,n){return a("div",{},[a("a-switch",{attrs:{defaultChecked:""},on:{change:function(t){return e.onChangeNav(n.id)}},model:{value:n.existNav,callback:function(t){e.$set(n,"existNav",t)},expression:"record.existNav"}})],1)}},{key:"action",fn:function(t,n){return a("span",{},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.generateHtml(n.id)}}},[e._v("生成HTML")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(){return e.showSheet(n)}}},[e._v("查看文章")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(){return e.edit(n.id)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.remove(n.id)}}},[e._v("删除")])],1)}}])},[a("template",{slot:"title"},[a("a-button",{attrs:{type:"primary"},on:{click:e.addInput}},[e._v("添加栏目")]),a("a-button",{on:{click:function(t){return e.updateAll(!1)}}},[e._v("生成所有栏目HTML")]),a("a-button",{on:{click:function(t){return e.updateAll(!0)}}},[e._v("生成所有栏目HTML更新模板")])],1)],2)],1),a("a-tab-pane",{key:"2",attrs:{tab:"使用说明",forceRender:""}},[a("p",{staticStyle:{padding:"2rem"}},[e._v(" 栏目管理存在的作用, 对于一个知识需要多个页面展示. "),a("br"),e._v("界面展示, 左侧是该栏目的所有文章,不采用分页, 右边是文章详情. "),a("br"),e._v("左侧的文章列表是单独生成的, 这个预览的只是一组文章列表. "),a("br"),e._v("每次添加文章回去维护这个列表. "),a("br"),e._v("这所有文章中添加这个列表, 从而实现动态展示文章, 不用每次生成所有文章(跟新栏目的文章列表). "),a("br")])])],1),a("a-modal",{attrs:{title:"添加栏目"},on:{ok:e.addOrUpdateChannel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",{attrs:{layout:"horizontal"}},[a("a-form-item",{attrs:{label:"视图的名称",help:"不输入.默认生成"}},[a("a-input",{model:{value:e.channelParam.viewName,callback:function(t){e.$set(e.channelParam,"viewName",t)},expression:"channelParam.viewName"}})],1),a("a-form-item",{attrs:{label:"栏目名称"}},[a("a-input",{model:{value:e.channelParam.name,callback:function(t){e.$set(e.channelParam,"name",t)},expression:"channelParam.name"}})],1),a("a-form-item",{attrs:{label:"选择栏目列表的模板"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:e.channelParam.templateName,callback:function(t){e.$set(e.channelParam,"templateName",t)},expression:"channelParam.templateName"}},e._l(e.channelTemplates,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.enName}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"选择文章显示的模板"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:e.channelParam.articleTemplateName,callback:function(t){e.$set(e.channelParam,"articleTemplateName",t)},expression:"channelParam.articleTemplateName"}},e._l(e.channelSheetTemplate,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.enName}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"栏目的排序"}},[a("a-input",{model:{value:e.channelParam.order,callback:function(t){e.$set(e.channelParam,"order",t)},expression:"channelParam.order"}})],1)],1)],1),a("a-modal",{attrs:{title:"更新第一篇文章"},on:{ok:e.UpdateFirstSheetName},model:{value:e.visibleSheet,callback:function(t){e.visibleSheet=t},expression:"visibleSheet"}},[a("a-form-item",{attrs:{label:"选择文章显示的模板"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:e.selectSheet,callback:function(t){e.selectSheet=t},expression:"selectSheet"}},e._l(e.articles,(function(t){return a("a-select-option",{key:t.viewName,attrs:{value:t.viewName}},[e._v(e._s(t.title))])})),1)],1)],1)],1)},c=[],i=(a("7db0"),a("b0c0"),a("6dfa")),r=a("c621"),l=a("2423"),o=a("5c07"),s=[{title:"名称",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"视图名称",dataIndex:"viewName",key:"viewName",scopedSlots:{customRender:"viewName"}},{title:"第一篇文章",dataIndex:"firstArticle",key:"firstArticle"},{title:"Chanel模板",dataIndex:"templateName",key:"templateName"},{title:"sheet模板",dataIndex:"articleTemplateName",key:"articleTemplateName"},{title:"是否添加到导航",dataIndex:"existNav",key:"existNav",scopedSlots:{customRender:"existNav"}},{title:"Action",key:"action",fixed:"right",scopedSlots:{customRender:"action"}}],u={data:function(){return{channelParam:{name:"",articleTemplateName:"",templateName:"",viewName:""},channels:[],columns:s,visible:!1,channelTemplates:[],channelSheetTemplate:[],isUpdate:null,updateChannelId:null,articles:[],visibleSheet:!1,selectSheet:null,selectChannels:null}},created:function(){this.loadchannelas()},methods:{loadChannelTempalte:function(){var e=this;r["a"].findByType("ARTICLE_CHANNEL").then((function(t){e.channelSheetTemplate=t.data.data}))},loadChannelSheetTempalte:function(){var e=this;r["a"].findByType("CHANNEL").then((function(t){e.channelTemplates=t.data.data}))},loadchannelas:function(){var e=this;i["a"].list().then((function(t){e.channels=t.data.data}))},loadSheets:function(e){var t=this;l["a"].findListByCategoryId(e).then((function(e){t.articles=e.data.data}))},addInput:function(){this.isUpdate=!1,this.loadChannelTempalte(),this.loadChannelSheetTempalte(),this.visible=!0},addOrUpdateChannel:function(){var e=this;this.isUpdate?i["a"].update(this.updateChannelId,this.channelParam).then((function(t){e.$notification["success"]({message:"更新成功:"+t.data.message}),e.loadchannelas()})):i["a"].add(this.channelParam).then((function(t){e.$notification["success"]({message:"成功添加:"+t.data.message}),e.loadchannelas()})),this.visible=!1},edit:function(e){var t=this;this.loadChannelTempalte(),this.loadChannelSheetTempalte(),this.updateChannelId=e,this.isUpdate=!0,i["a"].find(e).then((function(e){t.channelParam=e.data.data})),this.visible=!0},showSheet:function(e){this.selectChannels=e,this.visibleSheet=!0,this.loadSheets(e.id)},remove:function(e){var t=this;i["a"].delete(e).then((function(e){t.$notification["success"]({message:"成功删除:"+e.data.message}),t.loadchannelas()}))},UpdateFirstSheetName:function(){var e=this;i["a"].updateFirstSheet(this.selectChannels.id,this.selectSheet).then((function(t){e.$notification["success"]({message:"更新栏目的文章地址:"+t.data.data.firstArticle}),e.loadchannelas()}))},onChangeNav:function(e){var t=this;i["a"].addOrRemoveToMenu(e).then((function(e){e.data.data.existNav?t.$notification["success"]({message:"成功添加"+e.data.data.name+"到导航!!"}):t.$notification["success"]({message:"成功移除"+e.data.data.name+"到导航!!"})}))},updateAll:function(e){var t=this;this.$confirm({title:"你确定生成所有栏目HTML?",content:"Some descriptions",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){e?i["a"].updateAll({more:!0}).then((function(e){t.$notification["success"]({message:"成功生成栏目Id为:"+e.data.data+"的HTML页面"}),t.loadArticle()})):i["a"].updateAll().then((function(e){t.$notification["success"]({message:"成功生成栏目Id为:"+e.data.data+"的HTML页面"}),t.loadArticle()}))},onCancel:function(){}})},preview:function(e){window.open(o["a"].Online("channel",e),"_blank")},openHtml:function(e){var t=e.viewName;e.path&&(t=e.path+"/"+t),window.open(o["a"].Html(t),"_blank")},generateHtml:function(e){var t=this;i["a"].generateHtml(e).then((function(e){t.$notification["success"]({message:"成功生成"+e.data.data.name+"的HTML"})}))}}},d=u,m=a("2877"),h=Object(m["a"])(d,n,c,!1,null,null,null);t["default"]=h.exports},2423:function(e,t,a){"use strict";var n=a("9efd"),c="/api/article",i={delete:function(e){return Object(n["a"])({url:"".concat(c,"/delete/").concat(e),method:"get"})},updateAll:function(e){return Object(n["a"])({url:"".concat(c,"/updateAll"),params:e,method:"get"})},query:function(e){return Object(n["a"])({url:c,params:e,method:"get"})},updateCategory:function(e,t){return Object(n["a"])({url:"".concat(c,"/updateCategory/").concat(e),params:{baseCategoryId:t},method:"get"})},addArticleToChannel:function(e,t){return Object(n["a"])({url:"".concat(c,"/addArticleToChannel/").concat(e),params:{channelId:t},method:"get"})},findListByCategoryId:function(e){return Object(n["a"])({url:"".concat(c,"/findListByCategoryId/").concat(e),method:"get"})},findById:function(e){return Object(n["a"])({url:"".concat(c,"/find/").concat(e),method:"get"})},haveHtml:function(e){return Object(n["a"])({url:"".concat(c,"/haveHtml/").concat(e),method:"get"})},create:function(e){return Object(n["a"])({url:c,data:e,method:"post"})},saveArticle:function(e){return Object(n["a"])({url:"".concat(c,"/save"),data:e,method:"post"})},updateArticle:function(e,t){return Object(n["a"])({url:"".concat(c,"/save/").concat(e),data:t,method:"post"})},update:function(e,t){return Object(n["a"])({url:"".concat(c,"/update/").concat(e),data:t,method:"post"})},generateHtml:function(e){return Object(n["a"])({url:"".concat(c,"/generateHtml/").concat(e),method:"get"})}};t["a"]=i},"6dfa":function(e,t,a){"use strict";var n=a("9efd"),c="/api/channel",i={updateFirstSheet:function(e,t){return Object(n["a"])({url:"".concat(c,"/updateFirstSheet/").concat(e),params:{name:t},method:"get"})},updateAll:function(e){return Object(n["a"])({url:"".concat(c,"/updateAll"),params:e,method:"get"})},addOrRemoveToMenu:function(e){return Object(n["a"])({url:"".concat(c,"/addOrRemoveToMenu/").concat(e),method:"get"})},list:function(){return Object(n["a"])({url:c,method:"get"})},delete:function(e){return Object(n["a"])({url:"".concat(c,"/delete/").concat(e),method:"get"})},find:function(e){return Object(n["a"])({url:"".concat(c,"/find/").concat(e),method:"get"})},add:function(e){return Object(n["a"])({url:c,method:"post",data:e})},update:function(e,t){return Object(n["a"])({url:"".concat(c,"/update/").concat(e),method:"post",data:t})},generateHtml:function(e){return Object(n["a"])({url:"".concat(c,"/generateHtml/").concat(e),method:"get"})}};t["a"]=i},"7db0":function(e,t,a){"use strict";var n=a("23e7"),c=a("b727").find,i=a("44d2"),r=a("ae40"),l="find",o=!0,s=r(l);l in[]&&Array(1)[l]((function(){o=!1})),n({target:"Array",proto:!0,forced:o||!s},{find:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),i(l)},ae40:function(e,t,a){var n=a("83ab"),c=a("d039"),i=a("5135"),r=Object.defineProperty,l={},o=function(e){throw e};e.exports=function(e,t){if(i(l,e))return l[e];t||(t={});var a=[][e],s=!!i(t,"ACCESSORS")&&t.ACCESSORS,u=i(t,0)?t[0]:o,d=i(t,1)?t[1]:void 0;return l[e]=!!a&&!c((function(){if(s&&!n)return!0;var e={length:-1};s?r(e,1,{enumerable:!0,get:o}):e[1]=1,a.call(e,u,d)}))}},b0c0:function(e,t,a){var n=a("83ab"),c=a("9bf2").f,i=Function.prototype,r=i.toString,l=/^\s*function ([^ (]*)/,o="name";!n||o in i||c(i,o,{configurable:!0,get:function(){try{return r.call(this).match(l)[1]}catch(e){return""}}})},b727:function(e,t,a){var n=a("0366"),c=a("44ad"),i=a("7b0b"),r=a("50c4"),l=a("65f0"),o=[].push,s=function(e){var t=1==e,a=2==e,s=3==e,u=4==e,d=6==e,m=5==e||d;return function(h,f,p,v){for(var b,g,y=i(h),k=c(y),S=n(f,p,3),N=r(k.length),T=0,C=v||l,O=t?C(h,N):a?C(h,0):void 0;N>T;T++)if((m||T in k)&&(b=k[T],g=S(b,T,y),e))if(t)O[T]=g;else if(g)switch(e){case 3:return!0;case 5:return b;case 6:return T;case 2:o.call(O,b)}else if(u)return!1;return d?-1:s||u?u:O}};e.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},c621:function(e,t,a){"use strict";var n=a("9efd"),c="/api/template",i={findByType:function(e){return Object(n["a"])({url:"".concat(c,"/find/").concat(e),method:"get"})},list:function(e){return Object(n["a"])({url:c,param:e,method:"get"})},create:function(e){return Object(n["a"])({url:c,data:e,method:"post"})}};t["a"]=i}}]);
//# sourceMappingURL=articleChannel.623792c7.js.map