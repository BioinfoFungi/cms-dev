{"version":3,"sources":["webpack:///./src/views/page/PageCreate.vue?439f","webpack:///src/views/page/PageCreate.vue","webpack:///./src/views/page/PageCreate.vue?6d19","webpack:///./src/views/page/PageCreate.vue","webpack:///./src/views/page/PageCreate.vue?5043","webpack:///./src/api/sheet.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticStyle","on","change","model","value","queryParam","callback","$$v","$set","expression","staticClass","attrs","showDrawer","_v","visible","onClose","_l","item","key","id","_s","name","submit","staticRenderFns","components","mavonEditor","data","originalContent","templateId","title","viewName","status","templates","isUpdate","beforeRouteEnter","next","articleId","sheet","vm","article","methods","formatContent","message","$router","push","$notification","loadTempalte","handleChange","template","component","baseUrl","sheetApi","service","url","method","params","sheetId"],"mappings":"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","file":"js/PageCreate.86b262ee.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('mavon-editor',{ref:\"md\",staticStyle:{\"min-height\":\"600px\",\"z-index\":\"1\"},on:{\"change\":_vm.change},model:{value:(_vm.queryParam.originalContent),callback:function ($$v) {_vm.$set(_vm.queryParam, \"originalContent\", $$v)},expression:\"queryParam.originalContent\"}}),_c('div',{staticClass:\"article-bottom\"},[_c('div',{staticClass:\"article-option\"},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showDrawer}},[_vm._v(\"打开发布面板\")])],1)]),_c('a-drawer',{attrs:{\"title\":\"创建或跟新页面\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.visible,\"width\":\"30rem\"},on:{\"close\":_vm.onClose}},[_c('a-form-item',{attrs:{\"label\":\"页面名称\"}},[_c('a-input',{model:{value:(_vm.queryParam.title),callback:function ($$v) {_vm.$set(_vm.queryParam, \"title\", $$v)},expression:\"queryParam.title\"}})],1),_c('a-form',[_c('a-form-item',{attrs:{\"label\":\"页面路径\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入页面路径\"},model:{value:(_vm.queryParam.viewName),callback:function ($$v) {_vm.$set(_vm.queryParam, \"viewName\", $$v)},expression:\"queryParam.viewName\"}})],1),_c('a-form-item',{attrs:{\"label\":\"选择模板\"}},[_c('a-select',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.queryParam.templateId),callback:function ($$v) {_vm.$set(_vm.queryParam, \"templateId\", $$v)},expression:\"queryParam.templateId\"}},_vm._l((_vm.templates),function(item){return _c('a-select-option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_c('a-form-item',[_c('a-button',{on:{\"click\":_vm.submit}},[_vm._v(\"发布\")])],1)],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div>\n      <mavon-editor\n        v-model=\"queryParam.originalContent\"\n        ref=\"md\"\n        @change=\"change\"\n        style=\"min-height: 600px;z-index: 1;\"\n      />\n      <div class=\"article-bottom\">\n        <div class=\"article-option\">\n          <a-button type=\"primary\" @click=\"showDrawer\">打开发布面板</a-button>\n        </div>\n      </div>\n\n      <a-drawer\n        title=\"创建或跟新页面\"\n        placement=\"right\"\n        :closable=\"false\"\n        @close=\"onClose\"\n        :visible=\"visible\"\n        width=\"30rem\"\n      >\n        <a-form-item label=\"页面名称\">\n          <a-input v-model=\"queryParam.title\"></a-input>\n        </a-form-item>\n        <a-form>\n          <a-form-item label=\"页面路径\">\n            <a-input placeholder=\"请输入页面路径\" v-model=\"queryParam.viewName\" />\n          </a-form-item>\n\n          <a-form-item label=\"选择模板\">\n            <a-select style=\"width: 100%\" v-model=\"queryParam.templateId\">\n              <a-select-option\n                :value=\"item.id\"\n                v-for=\"item in templates\"\n                :key=\"item.id\"\n              >{{item.name}}</a-select-option>\n            </a-select>\n          </a-form-item>\n\n          <a-form-item>\n            <a-button @click=\"submit\">发布</a-button>\n          </a-form-item>\n        </a-form>\n      </a-drawer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mavonEditor } from \"mavon-editor\";\nimport \"mavon-editor/dist/css/index.css\";\n\nimport templateApi from \"@/api/template.js\";\nimport sheetApi from \"@/api/sheet.js\";\nexport default {\n  // 注册\n  components: {\n    mavonEditor\n  },\n  data() {\n    return {\n      queryParam: {\n        originalContent: \"\", // 输入的markdown\n        templateId: \"\",\n        title: \"\",\n        viewName: \"\",\n        status: \"PUBLISHED\"\n      },\n      visible: false,\n      templates: [],\n      isUpdate: false\n    };\n  },\n  beforeRouteEnter(to, from, next) {\n    // Get post id from query\n    const articleId = to.query.sheetId;\n    next(vm => {\n      if (articleId) {\n        sheetApi.findById(articleId).then(response => {\n          const article = response.data.data;\n          // console.log(article);\n          vm.queryParam.originalContent = article.originalContent; // 输入的markdown\n          // vm.queryParam.haveHtml= article.haveHtml\n          // vm.queryParam.templateId = article.templateId;\n          vm.queryParam.title = article.title;\n          vm.queryParam.viewName = article.viewName;\n          vm.queryParam.status = article.status;\n          //     tagIds: []\n          // categoryIds: []\n          vm.isUpdate = true;\n        });\n      }\n    });\n  },\n  methods: {\n    // 所有操作都会被解析重新渲染\n    change(value, render) {\n      // render 为 markdown 解析后的结果[html]\n      this.queryParam.formatContent = render;\n    },\n    // 提交\n    submit() {\n      if (!this.queryParam.templateId) {\n        this.$notification[\"error\"]({\n          message: \"请至少选择一个模板!!\"\n        });\n        return;\n      }\n      if (this.isUpdate) {\n        sheetApi\n          .update(this.$route.query.sheetId, this.queryParam)\n          .then(response => {\n            // console.log(response);\n\n            this.$notification[\"success\"]({\n\n              message: \"更新成功:\" + response.data.message\n            });\n\n            this.$router.push({ name: \"PageList\" });\n          });\n      } else {\n        // console.log(this.queryParam);\n        sheetApi.create(this.queryParam).then(response => {\n          // console.log(response);\n          this.$notification[\"success\"]({\n            message: \"添加成功\"+response.data.message \n          });\n        });\n      }\n      this.$router.push({ name: \"PageList\" });\n    },\n    showDrawer() {\n      this.loadTempalte();\n      this.visible = true;\n    },\n    onClose() {\n      this.visible = false;\n    },\n    handleChange(value) {\n      this.queryParam.templateId = value;\n    },\n    loadTempalte() {\n      templateApi.findByType(\"SHEET\").then(response => {\n        this.templates = response.data.data;\n        // console.log(response);\n      });\n    }\n  }\n};\n</script>\n\n<style>\n.article-bottom {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 4rem;\n  background: #fff;\n  z-index: 5;\n}\n.article-option {\n  float: right;\n  position: relative;\n  top: 1rem;\n  right: 2rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageCreate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageCreate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageCreate.vue?vue&type=template&id=428bfeb2&\"\nimport script from \"./PageCreate.vue?vue&type=script&lang=js&\"\nexport * from \"./PageCreate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageCreate.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageCreate.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageCreate.vue?vue&type=style&index=0&lang=css&\"","import service from '@/utils/service'\nconst baseUrl = '/api/sheet'\n\nconst sheetApi = {}\n\nsheetApi.list=()=>{\n    return service({\n        url:baseUrl,\n        method:\"get\"\n    })\n}\nsheetApi.deleteById=(id) => {\n    return service({\n        url: `${baseUrl}/delete/${id}`,\n        method: 'get'\n    })\n}\n\nsheetApi.generateHtml=(id) => {\n    return service({\n        url: `${baseUrl}/generate/${id}`,\n        method: 'get'\n    })\n}\nsheetApi.query = (params) => {\n    return service({\n        url: baseUrl,\n        params: params,\n        method: 'get'\n    })\n}\nsheetApi.findById = (sheetId) => {\n    return service({\n        url: `${baseUrl}/find/${sheetId}`,\n        method: 'get'\n    })\n}\nsheetApi.create = (params) => {\n    return service({\n        url: baseUrl,\n        data: params,\n        method: 'post'\n    })\n}\n\nsheetApi.update = (id,params) => {\n    return service({\n        url: `${baseUrl}/update/${id}`,\n        data: params,\n        method: 'post'\n    })\n}\nexport default sheetApi"],"sourceRoot":""}