(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"1e80":function(t,e,a){},"71a8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-wrapper"},[a("a-card",{attrs:{title:"欢迎登录cms系统"}},[a("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:"Please input your name"},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),a("a-form-item",{attrs:{label:"用户密码"}},[a("a-input",{attrs:{placeholder:"Please input your password",type:"password",autocomplete:""},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("登录")])],1)],1)],1)],1)},s=[],n=(a("ac1f"),a("5319"),a("9efd")),o={login:function(t){return Object(n["a"])({url:"/user/authenticate",data:t,method:"post"})},logout:function(){return Object(n["a"])({url:"/logout",method:"post"})},getCurrentUser:function(){return Object(n["a"])({url:"/api/user/getCurrent",method:"get"})}},u=o,i={data:function(){return{user:{username:"",password:""},form:this.$form.createForm(this,{name:"horizontal_login"})}},created:function(){var t=localStorage.getItem("jwtToken");null!=t&&this.$router.replace("/article/list")},methods:{submit:function(){var t=this;u.login(this.user).then((function(e){t.$message.success("登录成功!!"+e.data.message),localStorage.setItem("jwtToken",e.data.data.id_token),u.getCurrentUser().then((function(e){localStorage.setItem("user",JSON.stringify(e.data.data)),t.$router.replace("/article/list")}))}))},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){t||u.login(a).then((function(t){e.$message.success("登录成功!!"+t.data.message)}))}))}}},l=i,c=(a("939a"),a("2877")),m=Object(c["a"])(l,r,s,!1,null,null,null);e["default"]=m.exports},"939a":function(t,e,a){"use strict";var r=a("1e80"),s=a.n(r);s.a}}]);
//# sourceMappingURL=login.1a87ff5c.js.map