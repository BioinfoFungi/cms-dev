{"version":3,"sources":["webpack:///./src/views/page/PageCreate.vue?1649","webpack:///src/views/page/PageCreate.vue","webpack:///./src/views/page/PageCreate.vue?6d19","webpack:///./src/views/page/PageCreate.vue","webpack:///./src/views/page/PageCreate.vue?5043","webpack:///./src/api/sheet.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","queryParam","callback","$$v","$set","expression","ref","staticStyle","on","change","staticClass","showDrawer","_v","visible","onClose","_l","item","key","id","enName","_s","name","submit","staticRenderFns","components","mavonEditor","data","originalContent","templateName","title","viewName","status","templates","isUpdate","beforeRouteEnter","next","articleId","sheet","vm","article","methods","formatContent","message","response","loadTemplate","handleChange","channelId","template","component","baseUrl","sheetApi","param","service","url","params","method","sheetId"],"mappings":"qHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,MAAM,CAAC,YAAc,SAASC,MAAM,CAACC,MAAOR,EAAIS,WAAgB,MAAEC,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIS,WAAY,QAASE,IAAME,WAAW,sBAAsBT,EAAG,eAAe,CAACU,IAAI,KAAKC,YAAY,CAAC,aAAa,QAAQ,UAAU,KAAKC,GAAG,CAAC,OAAShB,EAAIiB,QAAQV,MAAM,CAACC,MAAOR,EAAIS,WAA0B,gBAAEC,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIS,WAAY,kBAAmBE,IAAME,WAAW,gCAAgCT,EAAG,MAAM,CAACc,YAAY,kBAAkB,CAACd,EAAG,MAAM,CAACc,YAAY,kBAAkB,CAACd,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,WAAWU,GAAG,CAAC,MAAQhB,EAAImB,aAAa,CAACnB,EAAIoB,GAAG,aAAa,KAAKhB,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,UAAU,UAAY,QAAQ,UAAW,EAAM,QAAUN,EAAIqB,QAAQ,MAAQ,SAASL,GAAG,CAAC,MAAQhB,EAAIsB,UAAU,CAAClB,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,UAAU,CAACG,MAAM,CAACC,MAAOR,EAAIS,WAAgB,MAAEC,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIS,WAAY,QAASE,IAAME,WAAW,uBAAuB,GAAGT,EAAG,SAAS,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,UAAU,CAACE,MAAM,CAAC,YAAc,WAAWC,MAAM,CAACC,MAAOR,EAAIS,WAAmB,SAAEC,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIS,WAAY,WAAYE,IAAME,WAAW,0BAA0B,GAAGT,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,WAAW,CAACW,YAAY,CAAC,MAAQ,QAAQR,MAAM,CAACC,MAAOR,EAAIS,WAAuB,aAAEC,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIS,WAAY,eAAgBE,IAAME,WAAW,4BAA4Bb,EAAIuB,GAAIvB,EAAa,WAAE,SAASwB,GAAM,OAAOpB,EAAG,kBAAkB,CAACqB,IAAID,EAAKE,GAAGpB,MAAM,CAAC,MAAQkB,EAAKG,SAAS,CAAC3B,EAAIoB,GAAGpB,EAAI4B,GAAGJ,EAAKK,YAAW,IAAI,GAAGzB,EAAG,cAAc,CAACA,EAAG,WAAW,CAACY,GAAG,CAAC,MAAQhB,EAAI8B,SAAS,CAAC9B,EAAIoB,GAAG,SAAS,IAAI,IAAI,IAAI,MAClwDW,EAAkB,G,gDCwDtB,GAEEC,WAAY,CACVC,YAAJ,kBAEEC,KALF,WAMI,MAAO,CACLzB,WAAY,CACV0B,gBAAiB,GACjBC,aAAc,GACdC,MAAO,GACPC,SAAU,GACVC,OAAQ,aAEVlB,SAAS,EACTmB,UAAW,GACXC,UAAU,IAGdC,iBAnBF,SAmBA,OAEI,IAAJ,kBACIC,GAAK,SAAT,GACUC,GACFC,EAAR,mCACU,IAAV,cAEUC,EAAGrC,WAAW0B,gBAAkBY,EAAQZ,gBAGxCW,EAAGrC,WAAW4B,MAAQU,EAAQV,MAC9BS,EAAGrC,WAAW6B,SAAWS,EAAQT,SACjCQ,EAAGrC,WAAW8B,OAASQ,EAAQR,OAG/BO,EAAGL,UAAW,SAKtBO,QAAS,CAEP/B,OAFJ,SAEA,KAEMhB,KAAKQ,WAAWwC,cAAgBlD,GAGlC+B,OAPJ,WAOA,WAOU7B,KAAKwC,SACPI,EAAR,KACA,kDACA,kBAGU,EAAV,0BACY,QAAZ,yBAGU,EAAV,cAAY,KAAZ,gBAIQA,EAAR,+CAEU,EAAV,0BACYK,QAAS,OAASC,EAASjB,KAAKgB,UAElC,EAAV,oCAII/B,WArCJ,WAsCMlB,KAAKmD,eACLnD,KAAKoB,SAAU,GAEjBC,QAzCJ,WA0CMrB,KAAKoB,SAAU,GAEjBgC,aA5CJ,SA4CA,GACMpD,KAAKQ,WAAW6C,UAAY9C,GAE9B4C,aA/CJ,WA+CA,WACMG,EAAN,2CACQ,EAAR,4BClJmW,I,wBCQ/VC,EAAY,eACd,EACAzD,EACAgC,GACA,EACA,KACA,KACA,MAIa,aAAAyB,E,6CCnBf,yBAAme,EAAG,G,yDCAte,gBACMC,EAAU,aAEVC,EAAW,CAEjBA,KAAc,SAACC,GACX,OAAOC,eAAQ,CACXC,IAAIJ,EACJK,OAAQH,EACRI,OAAO,SAGfL,kBAA2B,SAAAhC,GACvB,OAAOkC,eAAQ,CACbC,IAAG,UAAIJ,EAAJ,8BAAiC/B,GACpCqC,OAAO,SAIbL,oBAA8B,SAAAhC,GAC1B,OAAOkC,eAAQ,CACXC,IAAK,GAAF,OAAKJ,EAAL,gCAAoC/B,GACvCqC,OAAQ,SAGhBL,WAAoB,SAAChC,GACjB,OAAOkC,eAAQ,CACXC,IAAK,GAAF,OAAKJ,EAAL,mBAAuB/B,GAC1BqC,OAAQ,SAIhBL,aAAsB,SAAChC,GACnB,OAAOkC,eAAQ,CACXC,IAAK,GAAF,OAAKJ,EAAL,qBAAyB/B,GAC5BqC,OAAQ,SAGhBL,MAAiB,SAACI,GACd,OAAOF,eAAQ,CACXC,IAAKJ,EACLK,OAAQA,EACRC,OAAQ,SAGhBL,SAAoB,SAACM,GACjB,OAAOJ,eAAQ,CACXC,IAAK,GAAF,OAAKJ,EAAL,iBAAqBO,GACxBD,OAAQ,SAGhBL,OAAkB,SAACI,GACf,OAAOF,eAAQ,CACXC,IAAKJ,EACLvB,KAAM4B,EACNC,OAAQ,UAIhBL,OAAkB,SAAChC,EAAGoC,GAClB,OAAOF,eAAQ,CACXC,IAAK,GAAF,OAAKJ,EAAL,mBAAuB/B,GAC1BQ,KAAM4B,EACNC,OAAQ,WAGDL","file":"js/PageCreate.3ce218ec.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('a-input',{attrs:{\"placeholder\":\"请输入标题\"},model:{value:(_vm.queryParam.title),callback:function ($$v) {_vm.$set(_vm.queryParam, \"title\", $$v)},expression:\"queryParam.title\"}}),_c('mavon-editor',{ref:\"md\",staticStyle:{\"min-height\":\"600px\",\"z-index\":\"1\"},on:{\"change\":_vm.change},model:{value:(_vm.queryParam.originalContent),callback:function ($$v) {_vm.$set(_vm.queryParam, \"originalContent\", $$v)},expression:\"queryParam.originalContent\"}}),_c('div',{staticClass:\"article-bottom\"},[_c('div',{staticClass:\"article-option\"},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showDrawer}},[_vm._v(\"打开发布面板\")])],1)]),_c('a-drawer',{attrs:{\"title\":\"创建或跟新页面\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.visible,\"width\":\"30rem\"},on:{\"close\":_vm.onClose}},[_c('a-form-item',{attrs:{\"label\":\"页面名称\"}},[_c('a-input',{model:{value:(_vm.queryParam.title),callback:function ($$v) {_vm.$set(_vm.queryParam, \"title\", $$v)},expression:\"queryParam.title\"}})],1),_c('a-form',[_c('a-form-item',{attrs:{\"label\":\"视图路径\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入视图路径\"},model:{value:(_vm.queryParam.viewName),callback:function ($$v) {_vm.$set(_vm.queryParam, \"viewName\", $$v)},expression:\"queryParam.viewName\"}})],1),_c('a-form-item',{attrs:{\"label\":\"选择模板\"}},[_c('a-select',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.queryParam.templateName),callback:function ($$v) {_vm.$set(_vm.queryParam, \"templateName\", $$v)},expression:\"queryParam.templateName\"}},_vm._l((_vm.templates),function(item){return _c('a-select-option',{key:item.id,attrs:{\"value\":item.enName}},[_vm._v(_vm._s(item.name))])}),1)],1),_c('a-form-item',[_c('a-button',{on:{\"click\":_vm.submit}},[_vm._v(\"发布\")])],1)],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div>\n      <a-input placeholder=\"请输入标题\" v-model=\"queryParam.title\" />\n      <mavon-editor\n        v-model=\"queryParam.originalContent\"\n        ref=\"md\"\n        @change=\"change\"\n        style=\"min-height: 600px;z-index: 1;\"\n      />\n      <div class=\"article-bottom\">\n        <div class=\"article-option\">\n          <a-button type=\"primary\" @click=\"showDrawer\">打开发布面板</a-button>\n        </div>\n      </div>\n\n      <a-drawer\n        title=\"创建或跟新页面\"\n        placement=\"right\"\n        :closable=\"false\"\n        @close=\"onClose\"\n        :visible=\"visible\"\n        width=\"30rem\"\n      >\n        <a-form-item label=\"页面名称\">\n          <a-input v-model=\"queryParam.title\"></a-input>\n        </a-form-item>\n        <a-form>\n          <a-form-item label=\"视图路径\">\n            <a-input placeholder=\"请输入视图路径\" v-model=\"queryParam.viewName\" />\n          </a-form-item>\n\n          <a-form-item label=\"选择模板\">\n            <a-select style=\"width: 100%\" v-model=\"queryParam.templateName\">\n              <a-select-option\n                :value=\"item.enName\"\n                v-for=\"item in templates\"\n                :key=\"item.id\"\n              >{{item.name}}</a-select-option>\n            </a-select>\n          </a-form-item>\n\n          <a-form-item>\n            <a-button @click=\"submit\">发布</a-button>\n          </a-form-item>\n        </a-form>\n      </a-drawer>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mavonEditor } from \"mavon-editor\";\nimport \"mavon-editor/dist/css/index.css\";\nimport templateApi from \"@/api/template.js\";\n// import templateApi from \"@/api/template.js\";\nimport sheetApi from \"@/api/sheet.js\";\nexport default {\n  // 注册\n  components: {\n    mavonEditor\n  },\n  data() {\n    return {\n      queryParam: {\n        originalContent: \"\", // 输入的markdown\n        templateName: \"\",\n        title: \"\",\n        viewName: \"\",\n        status: \"PUBLISHED\"\n      },\n      visible: false,\n      templates: [],\n      isUpdate: false\n    };\n  },\n  beforeRouteEnter(to, from, next) {\n    // Get post id from query\n    const articleId = to.query.sheetId;\n    next(vm => {\n      if (articleId) {\n        sheetApi.findById(articleId).then(response => {\n          const article = response.data.data;\n          // console.log(article);\n          vm.queryParam.originalContent = article.originalContent; // 输入的markdown\n          // vm.queryParam.haveHtml= article.haveHtml\n          // vm.queryParam.templateId = article.templateId;\n          vm.queryParam.title = article.title;\n          vm.queryParam.viewName = article.viewName;\n          vm.queryParam.status = article.status;\n          //     tagIds: []\n          // categoryIds: []\n          vm.isUpdate = true;\n        });\n      }\n    });\n  },\n  methods: {\n    // 所有操作都会被解析重新渲染\n    change(value, render) {\n      // render 为 markdown 解析后的结果[html]\n      this.queryParam.formatContent = render;\n    },\n    // 提交\n    submit() {\n      // if (!this.queryParam.channelId) {\n      //   this.$notification[\"error\"]({\n      //     message: \"请选择一个栏目\"\n      //   });\n      //   return;\n      // }\n      if (this.isUpdate) {\n        sheetApi\n          .update(this.$route.query.sheetId, this.queryParam)\n          .then(response => {\n            // console.log(response);\n\n            this.$notification[\"success\"]({\n              message: \"更新成功:\" + response.data.message\n            });\n\n            this.$router.push({ name: \"PageList\" });\n          });\n      } else {\n        // console.log(this.queryParam);\n        sheetApi.create(this.queryParam).then(response => {\n          // console.log(response);\n          this.$notification[\"success\"]({\n            message: \"添加成功\" + response.data.message\n          });\n          this.$router.push({ name: \"PageList\" });\n        });\n      }\n    },\n    showDrawer() {\n      this.loadTemplate();\n      this.visible = true;\n    },\n    onClose() {\n      this.visible = false;\n    },\n    handleChange(value) {\n      this.queryParam.channelId = value;\n    },\n    loadTemplate() {\n      templateApi.findByType(\"SHEET\").then(response => {\n        this.templates = response.data.data;\n        // console.log(response);\n      });\n    }\n  }\n};\n</script>\n\n<style>\n.article-bottom {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 4rem;\n  background: #fff;\n  z-index: 5;\n}\n.article-option {\n  float: right;\n  position: relative;\n  top: 1rem;\n  right: 2rem;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageCreate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageCreate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageCreate.vue?vue&type=template&id=00e1b92e&\"\nimport script from \"./PageCreate.vue?vue&type=script&lang=js&\"\nexport * from \"./PageCreate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageCreate.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageCreate.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageCreate.vue?vue&type=style&index=0&lang=css&\"","import service from '@/utils/service'\nconst baseUrl = '/api/sheet'\n\nconst sheetApi = {}\n\nsheetApi.list=(param)=>{\n    return service({\n        url:baseUrl,\n        params: param,\n        method:\"get\"\n    })\n}\nsheetApi.addOrRemoveToMenu=id=>{\n    return service({\n      url:`${baseUrl}/addOrRemoveToMenu/${id}`,\n      method:'get'\n    })\n  }\n\nsheetApi.findListByChannelId =id => {\n    return service({\n        url: `${baseUrl}/findListByChannelId/${id}`,\n        method: 'get'\n    })\n  }\nsheetApi.deleteById=(id) => {\n    return service({\n        url: `${baseUrl}/delete/${id}`,\n        method: 'get'\n    })\n}\n\nsheetApi.generateHtml=(id) => {\n    return service({\n        url: `${baseUrl}/generate/${id}`,\n        method: 'get'\n    })\n}\nsheetApi.query = (params) => {\n    return service({\n        url: baseUrl,\n        params: params,\n        method: 'get'\n    })\n}\nsheetApi.findById = (sheetId) => {\n    return service({\n        url: `${baseUrl}/find/${sheetId}`,\n        method: 'get'\n    })\n}\nsheetApi.create = (params) => {\n    return service({\n        url: baseUrl,\n        data: params,\n        method: 'post'\n    })\n}\n\nsheetApi.update = (id,params) => {\n    return service({\n        url: `${baseUrl}/update/${id}`,\n        data: params,\n        method: 'post'\n    })\n}\nexport default sheetApi"],"sourceRoot":""}