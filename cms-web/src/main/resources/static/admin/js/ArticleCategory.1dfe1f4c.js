(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ArticleCategory"],{"0916":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("hr"),e("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.append({key:0})}}},[t._v("添加顶级菜单")]),t.categorys.length?e("a-tree",{attrs:{showLine:"",defaultExpandAll:"",treeData:t.categorys},scopedSlots:t._u([{key:"custom",fn:function(a){return[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.preview(a)}}},[t._v(t._s(a.title))]),t._v(" | "),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.openHtml(a)}}},[t._v("点击查看HTML")]),t._v(" | "),e("span",[t._v(t._s(a.haveHtml))]),e("a-button",{staticClass:"but_type",staticStyle:{right:"200px"},attrs:{type:"primary"},on:{click:function(){return t.append(a)}}},[t._v("新增")]),e("a-button",{staticClass:"but_type",staticStyle:{right:"120px"},attrs:{type:"primary"},on:{click:function(){return t.edit(a)}}},[t._v("编辑")]),e("a-button",{staticClass:"but_type",attrs:{type:"primary"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])]}}],null,!1,2250296418)}):t._e(),e("a-modal",{attrs:{title:"添加分类"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(a){t.visible=a},expression:"visible"}},[e("a-form",{attrs:{layout:"horizontal"}},[e("a-form-item",{attrs:{label:"视图的名称",help:"不输入.默认生成"}},[e("a-input",{model:{value:t.categoryParam.viewName,callback:function(a){t.$set(t.categoryParam,"viewName",a)},expression:"categoryParam.viewName"}})],1),e("a-form-item",{attrs:{label:"分类名称"}},[e("a-input",{model:{value:t.categoryParam.name,callback:function(a){t.$set(t.categoryParam,"name",a)},expression:"categoryParam.name"}})],1),e("a-form-item",{attrs:{label:"选择分类信息模板"}},[e("a-select",{staticStyle:{width:"100%"},model:{value:t.categoryParam.templateId,callback:function(a){t.$set(t.categoryParam,"templateId",a)},expression:"categoryParam.templateId"}},t._l(t.templates,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])})),1)],1),e("a-form-item",{attrs:{label:"分类的描述"}},[e("a-textarea",{model:{value:t.categoryParam.description,callback:function(a){t.$set(t.categoryParam,"description",a)},expression:"categoryParam.description"}})],1),e("a-form-item",[e("a-upload-dragger",{attrs:{name:"file",multiple:!0,action:t.upload,withCredentials:!0},on:{change:t.handleChange}},[e("p",{staticClass:"ant-upload-drag-icon"},[e("img",{attrs:{src:t.categoryParam.picPath,width:"100%",alt:"",srcset:""}})]),e("p",{staticClass:"ant-upload-text"},[t._v("Click or drag file to this area to upload")]),e("p",{staticClass:"ant-upload-hint"},[t._v("Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files")])])],1),e("a-form-item",{attrs:{label:"是否需要静态化"}},[e("a-radio-group",{attrs:{defaultValue:"1"},model:{value:t.categoryParam.haveHtml,callback:function(a){t.$set(t.categoryParam,"haveHtml",a)},expression:"categoryParam.haveHtml"}},[e("a-radio",{attrs:{value:1}},[t._v("是")]),e("a-radio",{attrs:{value:0}},[t._v("否")])],1)],1)],1)],1)],1)},n=[],i=(e("4160"),e("b0c0"),e("159b"),e("c405")),o=e("c621"),c=e("5c07"),s={data:function(){return{form:this.$form.createForm(this,{name:"123"}),categorys:[],categorysSource:[],value:"",templates:[],isUpdate:!1,updateId:"",visible:!1,categoryParam:{parentId:"",name:"",templateId:2,viewName:"",description:"",haveHtml:0,picPath:""}}},created:function(){this.loadcategory()},computed:{categoryIdMap:function(){var t={};return this.categorysSource.forEach((function(a){t[a.id]=a})),t},upload:function(){return i["a"].upload()}},methods:{loadTempalte:function(){var t=this;o["a"].findByType("CATEGORY_INFO").then((function(a){t.templates=a.data.data}))},loadcategory:function(){var t=this;i["a"].list().then((function(a){t.categorysSource=a.data.data,t.categorys=i["a"].concreteTree(a.data.data)}))},handleChange:function(t){var a=t.file.status;"done"===a?(this.categoryParam.picPath=t.file.response.data.path,this.$message.success("".concat(t.file.name," file uploaded successfully."))):"error"===a&&this.$message.error("".concat(t.file.name," file upload failed."))},handleOk:function(){var t=this;this.categorys=[],this.categoryParam.name?(this.isUpdate?i["a"].update(this.updateId,this.categoryParam).then((function(a){t.$notification["success"]({message:"成功更新数据:"+a.data.data.name})})):i["a"].add(this.categoryParam).then((function(a){t.$notification["success"]({message:"成功添加:"+a.data.data.name})})),this.loadcategory(),this.visible=!1):this.$notification["error"]({message:"分类标题不能为空!!"})},append:function(t){this.loadTempalte(),this.isUpdate=!1,this.categoryParam.parentId=t.key,this.visible=!0},edit:function(t){var a=this;this.loadTempalte(),this.isUpdate=!0,this.updateId=t.key,i["a"].findById(t.key).then((function(t){a.categoryParam=t.data.data,a.categoryParam.haveHtml=0,a.visible=!0}))},remove:function(t){var a=this;i["a"].deleteById(t.key).then((function(t){a.$notification["success"]({message:t.data.message}),a.loadcategory()}))},preview:function(t){window.open(c["a"].Online("category",t.key),"_blank")},openHtml:function(t){this.categoryIdMap[t.key].haveHtml?window.open(c["a"].Html(this.categoryIdMap[t.key].path+"/"+this.categoryIdMap[t.key].viewName),"_blank"):this.$message.error("该分类没有生成HTML")},onClose:function(){this.articleVisible=!1}}},l=s,u=(e("1dda"),e("2877")),d=Object(u["a"])(l,r,n,!1,null,null,null);a["default"]=d.exports},"159b":function(t,a,e){var r=e("da84"),n=e("fdbc"),i=e("17c2"),o=e("9112");for(var c in n){var s=r[c],l=s&&s.prototype;if(l&&l.forEach!==i)try{o(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,a,e){"use strict";var r=e("b727").forEach,n=e("a640"),i=e("ae40"),o=n("forEach"),c=i("forEach");t.exports=o&&c?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1c7e5":function(t,a,e){},"1dda":function(t,a,e){"use strict";var r=e("1c7e5"),n=e.n(r);n.a},4160:function(t,a,e){"use strict";var r=e("23e7"),n=e("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},a640:function(t,a,e){"use strict";var r=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&r((function(){e.call(null,a||function(){throw 1},1)}))}},ae40:function(t,a,e){var r=e("83ab"),n=e("d039"),i=e("5135"),o=Object.defineProperty,c={},s=function(t){throw t};t.exports=function(t,a){if(i(c,t))return c[t];a||(a={});var e=[][t],l=!!i(a,"ACCESSORS")&&a.ACCESSORS,u=i(a,0)?a[0]:s,d=i(a,1)?a[1]:void 0;return c[t]=!!e&&!n((function(){if(l&&!r)return!0;var t={length:-1};l?o(t,1,{enumerable:!0,get:s}):t[1]=1,e.call(t,u,d)}))}},b0c0:function(t,a,e){var r=e("83ab"),n=e("9bf2").f,i=Function.prototype,o=i.toString,c=/^\s*function ([^ (]*)/,s="name";!r||s in i||n(i,s,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(t){return""}}})},b727:function(t,a,e){var r=e("0366"),n=e("44ad"),i=e("7b0b"),o=e("50c4"),c=e("65f0"),s=[].push,l=function(t){var a=1==t,e=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d;return function(p,m,h,y){for(var g,v,b=i(p),k=n(b),S=r(m,h,3),P=o(k.length),L=0,_=y||c,C=a?_(p,P):e?_(p,0):void 0;P>L;L++)if((f||L in k)&&(g=k[L],v=S(g,L,b),t))if(a)C[L]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return L;case 2:s.call(C,g)}else if(u)return!1;return d?-1:l||u?u:C}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},c405:function(t,a,e){"use strict";e("4160"),e("b0c0"),e("159b");var r=e("9efd"),n="/api/category",i={};function o(t,a){a.forEach((function(a){t.key===a.parentId&&(t.children||(t.children=[]),t.children.push({key:a.id,title:a.name,isLeaf:!1,scopedSlots:{title:"custom"}}))})),t.children?t.children.forEach((function(t){return o(t,a)})):t.isLeaf=!0}i.list=function(){return Object(r["a"])({url:n,method:"get"})},i.add=function(t){return Object(r["a"])({url:n,method:"post",data:t})},i.update=function(t,a){return Object(r["a"])({url:"".concat(n,"/update/").concat(t),method:"post",data:a})},i.findById=function(t){return Object(r["a"])({url:"".concat(n,"/find/").concat(t),method:"get"})},i.deleteById=function(t){return Object(r["a"])({url:"".concat(n,"/delete/").concat(t),method:"get"})},i.findByCategoryDetail=function(t){return Object(r["a"])({url:"".concat(n,"/find/categoryDetail/").concat(t),method:"get"})},i.upload=function(){return"http://localhost:8080/api/attachment/upload"},i.concreteTree=function(t){var a={key:0,title:"top",children:[]};return o(a,t),a.children},a["a"]=i},c621:function(t,a,e){"use strict";var r=e("9efd"),n="/api/template",i={findByType:function(t){return Object(r["a"])({url:"".concat(n,"/find/").concat(t),method:"get"})},list:function(t){return Object(r["a"])({url:n,param:t,method:"get"})},create:function(t){return Object(r["a"])({url:n,data:t,method:"post"})}};a["a"]=i},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=ArticleCategory.1dfe1f4c.js.map