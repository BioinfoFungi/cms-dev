(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ArticleCategory"],{"0916":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-tabs",{attrs:{defaultActiveKey:"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"界面"}},[a("a-table",{staticClass:"table",attrs:{columns:t.columns,dataSource:t.categorys,pagination:!1,rowKey:function(t){return t.id},size:"small",scroll:{x:1500}},scopedSlots:t._u([{key:"name",fn:function(e,n){return a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.preview(n.id)}}},[t._v(t._s(e))])}},{key:"viewName",fn:function(e,n){return a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.openHtml(n)}}},[t._v(t._s(e))])}},{key:"recommend",fn:function(e,n){return a("div",{},[a("a-switch",{attrs:{defaultChecked:""},on:{change:function(e){return t.onChange(n.id)}},model:{value:n.recommend,callback:function(e){t.$set(n,"recommend",e)},expression:"record.recommend"}})],1)}},{key:"existNav",fn:function(e,n){return a("div",{},[a("a-switch",{attrs:{defaultChecked:""},on:{change:function(e){return t.onChangeNav(n.id)}},model:{value:n.existNav,callback:function(e){t.$set(n,"existNav",e)},expression:"record.existNav"}})],1)}},{key:"haveHtml",fn:function(e,n){return a("div",{},[a("a-switch",{attrs:{defaultChecked:""},on:{change:function(e){return t.onChangeHtml(n.id)}},model:{value:n.haveHtml,callback:function(e){t.$set(n,"haveHtml",e)},expression:"record.haveHtml"}})],1)}},{key:"action",fn:function(e,n){return a("span",{},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.generateHtml(n.id)}}},[t._v("生成HTML")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(){return t.edit(n.id)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.remove(n.id)}}},[t._v("删除分类")])],1)}}])},[a("template",{slot:"title"},[a("a-button",{attrs:{type:"primary"},on:{click:t.append}},[t._v("添加分类")]),a("a-button",{on:{click:function(e){return t.updateAll(!1)}}},[t._v("生成所有分类HTML")]),a("a-button",{on:{click:function(e){return t.updateAll(!0)}}},[t._v("生成所有分类HTML更新模板")])],1)],2)],1),a("a-tab-pane",{key:"2",attrs:{tab:"使用说明"}})],1),a("a-modal",{attrs:{title:"添加分类"},on:{ok:t.handleOk},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form",{attrs:{layout:"horizontal"}},[a("a-form-item",{attrs:{label:"视图的名称",help:"不输入.默认生成"}},[a("a-input",{model:{value:t.categoryParam.viewName,callback:function(e){t.$set(t.categoryParam,"viewName",e)},expression:"categoryParam.viewName"}})],1),a("a-form-item",{attrs:{label:"分类名称"}},[a("a-input",{model:{value:t.categoryParam.name,callback:function(e){t.$set(t.categoryParam,"name",e)},expression:"categoryParam.name"}})],1),a("a-form-item",{attrs:{label:"选择分类信息模板"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.categoryParam.templateName,callback:function(e){t.$set(t.categoryParam,"templateName",e)},expression:"categoryParam.templateName"}},t._l(t.templates,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.enName}},[t._v(t._s(e.name))])})),1)],1),a("a-form-item",{attrs:{label:"分类的描述"}},[a("a-textarea",{model:{value:t.categoryParam.description,callback:function(e){t.$set(t.categoryParam,"description",e)},expression:"categoryParam.description"}})],1),a("a-form-item",[a("a-upload-dragger",{attrs:{name:"file",multiple:!0,action:t.upload,withCredentials:!0},on:{change:t.handleChange}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("img",{attrs:{src:t.categoryParam.picPath,width:"100%",alt:"",srcset:""}})]),a("p",{staticClass:"ant-upload-text"},[t._v("Click or drag file to this area to upload")]),a("p",{staticClass:"ant-upload-hint"},[t._v("Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files")])]),a("a-input",{attrs:{placeholder:"直接粘贴图片路径"},model:{value:t.categoryParam.picPath,callback:function(e){t.$set(t.categoryParam,"picPath",e)},expression:"categoryParam.picPath"}})],1),a("a-form-item",[a("a-input",{model:{value:t.categoryParam.order,callback:function(e){t.$set(t.categoryParam,"order",e)},expression:"categoryParam.order"}})],1)],1)],1)],1)},c=[],o=(a("b0c0"),a("c405")),r=a("c621"),i=a("5c07"),s=a("a796"),l=[{title:"名称",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"视图名称",dataIndex:"viewName",key:"viewName",scopedSlots:{customRender:"viewName"}},{title:"category模板",dataIndex:"templateName",key:"templateName"},{title:"是否推荐首页",dataIndex:"recommend",key:"recommend",scopedSlots:{customRender:"recommend"}},{title:"是否添加到导航",dataIndex:"existNav",key:"existNav",scopedSlots:{customRender:"existNav"}},{title:"是否生成Html",dataIndex:"haveHtml",key:"haveHtml",scopedSlots:{customRender:"haveHtml"}},{title:"Action",key:"action",fixed:"right",scopedSlots:{customRender:"action"}}],u={data:function(){return{columns:l,form:this.$form.createForm(this,{name:"123"}),categorys:[],value:"",templates:[],isUpdate:!1,updateId:null,visible:!1,categoryParam:{order:0,name:"",templateName:"",viewName:"",description:"",picPath:""}}},created:function(){this.loadcategory()},computed:{upload:function(){return s["a"].upload()}},methods:{loadTempalte:function(){var t=this;r["a"].findByType("CATEGORY").then((function(e){t.templates=e.data.data}))},loadcategory:function(){var t=this;o["a"].list().then((function(e){t.categorys=e.data.data}))},handleChange:function(t){var e=t.file.status;"done"===e?(this.categoryParam.picPath=t.file.response.data.path,this.$message.success("".concat(t.file.name," file uploaded successfully."))):"error"===e&&this.$message.error("".concat(t.file.name," file upload failed."))},handleOk:function(){var t=this;this.categoryParam.name?(this.isUpdate?o["a"].update(this.updateId,this.categoryParam).then((function(e){t.$notification["success"]({message:"成功更新数据:"+e.data.data.name}),t.loadcategory()})):o["a"].add(this.categoryParam).then((function(e){t.$notification["success"]({message:"成功添加:"+e.data.data.name}),t.loadcategory()})),this.visible=!1):this.$notification["error"]({message:"分类标题不能为空!!"})},append:function(){this.loadTempalte(),this.isUpdate=!1,this.visible=!0},edit:function(t){var e=this;this.loadTempalte(),this.isUpdate=!0,this.updateId=t,o["a"].findById(t).then((function(t){e.categoryParam=t.data.data,e.visible=!0}))},onChange:function(t){var e=this;o["a"].recommendOrCancel(t).then((function(t){t.data.data.recommend?e.$notification["success"]({message:"分类"+t.data.data.name+"成功在首页推荐!!"}):e.$notification["success"]({message:"分类"+t.data.data.name+"已经从首页取消推荐!!"})}))},onChangeNav:function(t){var e=this;o["a"].addOrRemoveToMenu(t).then((function(t){t.data.data.existNav?e.$notification["success"]({message:"成功添加"+t.data.data.name+"到导航!!"}):e.$notification["success"]({message:"成功移除"+t.data.data.name+"到导航!!"})}))},onChangeHtml:function(t){var e=this;o["a"].haveHtml(t).then((function(t){var a=t.data.data;a.haveHtml?e.$notification["success"]({message:"成功生成"+a.name+"Html"}):e.$notification["success"]({message:"成功移除"+a.name+"Html"})}))},remove:function(t){var e=this;o["a"].deleteById(t).then((function(t){e.$notification["success"]({message:t.data.message}),e.loadcategory()}))},preview:function(t){window.open(i["a"].Online("category",t),"_blank")},openHtml:function(t){t.haveHtml?window.open(i["a"].Html(t.path+"/"+t.viewName),"_blank"):this.$message.error("该分类没有生成HTML")},onClose:function(){this.articleVisible=!1},generateHtml:function(t){var e=this;o["a"].generateHtml(t).then((function(t){e.$notification["success"]({message:"成功生成"+t.data.data.name+"的HTML"})}))},updateAll:function(t){var e=this;this.$confirm({title:"你确定生成所有栏目HTML?",content:"Some descriptions",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){t?o["a"].updateAll({more:!0}).then((function(t){e.$notification["success"]({message:"成功生成栏目Id为:"+t.data.data+"的HTML页面"}),e.loadArticle()})):o["a"].updateAll().then((function(t){e.$notification["success"]({message:"成功生成栏目Id为:"+t.data.data+"的HTML页面"}),e.loadArticle()}))},onCancel:function(){}})}}},d=u,m=(a("1dda"),a("2877")),f=Object(m["a"])(d,n,c,!1,null,null,null);e["default"]=f.exports},"159b":function(t,e,a){var n=a("da84"),c=a("fdbc"),o=a("17c2"),r=a("9112");for(var i in c){var s=n[i],l=s&&s.prototype;if(l&&l.forEach!==o)try{r(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,c=a("a640"),o=a("ae40"),r=c("forEach"),i=o("forEach");t.exports=r&&i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1c7e5":function(t,e,a){},"1dda":function(t,e,a){"use strict";var n=a("1c7e5"),c=a.n(n);c.a},4160:function(t,e,a){"use strict";var n=a("23e7"),c=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},a796:function(t,e,a){"use strict";a("99af");var n=a("9efd"),c=a("72ac"),o="/api/attachment",r={upload:function(){return"http://".concat(c["a"].baseUrl,":").concat(c["a"].port,"/api/attachment/upload")},list:function(){return Object(n["a"])({url:o,method:"get"})}};e["a"]=r},ae40:function(t,e,a){var n=a("83ab"),c=a("d039"),o=a("5135"),r=Object.defineProperty,i={},s=function(t){throw t};t.exports=function(t,e){if(o(i,t))return i[t];e||(e={});var a=[][t],l=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:s,d=o(e,1)?e[1]:void 0;return i[t]=!!a&&!c((function(){if(l&&!n)return!0;var t={length:-1};l?r(t,1,{enumerable:!0,get:s}):t[1]=1,a.call(t,u,d)}))}},b0c0:function(t,e,a){var n=a("83ab"),c=a("9bf2").f,o=Function.prototype,r=o.toString,i=/^\s*function ([^ (]*)/,s="name";!n||s in o||c(o,s,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(t){return""}}})},b727:function(t,e,a){var n=a("0366"),c=a("44ad"),o=a("7b0b"),r=a("50c4"),i=a("65f0"),s=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,u=4==t,d=6==t,m=5==t||d;return function(f,h,p,v){for(var g,y,b=o(f),k=c(b),S=n(h,p,3),x=r(k.length),C=0,H=v||i,L=e?H(f,x):a?H(f,0):void 0;x>C;C++)if((m||C in k)&&(g=k[C],y=S(g,C,b),t))if(e)L[C]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return C;case 2:s.call(L,g)}else if(u)return!1;return d?-1:l||u?u:L}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},c405:function(t,e,a){"use strict";a("4160"),a("b0c0"),a("159b");var n=a("9efd"),c="/api/category",o={};function r(t,e){e.forEach((function(e){t.key===e.parentId&&(t.children||(t.children=[]),t.children.push({key:e.id,title:e.name,isLeaf:!1,scopedSlots:{title:"custom"}}))})),t.children?t.children.forEach((function(t){return r(t,e)})):t.isLeaf=!0}o.list=function(){return Object(n["a"])({url:c,method:"get"})},o.listBaseCategory=function(){return Object(n["a"])({url:"".concat(c,"/listBaseCategory"),method:"get"})},o.updateAll=function(t){return Object(n["a"])({url:"".concat(c,"/updateAll"),params:t,method:"get"})},o.add=function(t){return Object(n["a"])({url:c,method:"post",data:t})},o.update=function(t,e){return Object(n["a"])({url:"".concat(c,"/update/").concat(t),method:"post",data:e})},o.findById=function(t){return Object(n["a"])({url:"".concat(c,"/find/").concat(t),method:"get"})},o.recommendOrCancel=function(t){return Object(n["a"])({url:"".concat(c,"/recommendOrCancel/").concat(t),method:"get"})},o.addOrRemoveToMenu=function(t){return Object(n["a"])({url:"".concat(c,"/addOrRemoveToMenu/").concat(t),method:"get"})},o.haveHtml=function(t){return Object(n["a"])({url:"".concat(c,"/haveHtml/").concat(t),method:"get"})},o.deleteById=function(t){return Object(n["a"])({url:"".concat(c,"/delete/").concat(t),method:"get"})},o.findByCategoryDetail=function(t){return Object(n["a"])({url:"".concat(c,"/find/categoryDetail/").concat(t),method:"get"})},o.generateHtml=function(t){return Object(n["a"])({url:"".concat(c,"/generateHtml/").concat(t),method:"get"})},o.concreteTree=function(t){var e={key:0,title:"top",children:[]};return r(e,t),e.children},e["a"]=o},c621:function(t,e,a){"use strict";var n=a("9efd"),c="/api/template",o={findByType:function(t){return Object(n["a"])({url:"".concat(c,"/find/").concat(t),method:"get"})},list:function(t){return Object(n["a"])({url:c,param:t,method:"get"})},create:function(t){return Object(n["a"])({url:c,data:t,method:"post"})}};e["a"]=o},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=ArticleCategory.70ceccee.js.map