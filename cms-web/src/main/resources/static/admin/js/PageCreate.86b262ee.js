(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PageCreate"],{"0705":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("mavon-editor",{ref:"md",staticStyle:{"min-height":"600px","z-index":"1"},on:{change:t.change},model:{value:t.queryParam.originalContent,callback:function(e){t.$set(t.queryParam,"originalContent",e)},expression:"queryParam.originalContent"}}),a("div",{staticClass:"article-bottom"},[a("div",{staticClass:"article-option"},[a("a-button",{attrs:{type:"primary"},on:{click:t.showDrawer}},[t._v("打开发布面板")])],1)]),a("a-drawer",{attrs:{title:"创建或跟新页面",placement:"right",closable:!1,visible:t.visible,width:"30rem"},on:{close:t.onClose}},[a("a-form-item",{attrs:{label:"页面名称"}},[a("a-input",{model:{value:t.queryParam.title,callback:function(e){t.$set(t.queryParam,"title",e)},expression:"queryParam.title"}})],1),a("a-form",[a("a-form-item",{attrs:{label:"页面路径"}},[a("a-input",{attrs:{placeholder:"请输入页面路径"},model:{value:t.queryParam.viewName,callback:function(e){t.$set(t.queryParam,"viewName",e)},expression:"queryParam.viewName"}})],1),a("a-form-item",{attrs:{label:"选择模板"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.queryParam.templateId,callback:function(e){t.$set(t.queryParam,"templateId",e)},expression:"queryParam.templateId"}},t._l(t.templates,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),a("a-form-item",[a("a-button",{on:{click:t.submit}},[t._v("发布")])],1)],1)],1)],1)])},r=[],i=a("b2d8"),o=(a("64e1"),a("c621")),s=a("ed66"),u={components:{mavonEditor:i["mavonEditor"]},data:function(){return{queryParam:{originalContent:"",templateId:"",title:"",viewName:"",status:"PUBLISHED"},visible:!1,templates:[],isUpdate:!1}},beforeRouteEnter:function(t,e,a){var n=t.query.sheetId;a((function(t){n&&s["a"].findById(n).then((function(e){var a=e.data.data;t.queryParam.originalContent=a.originalContent,t.queryParam.title=a.title,t.queryParam.viewName=a.viewName,t.queryParam.status=a.status,t.isUpdate=!0}))}))},methods:{change:function(t,e){this.queryParam.formatContent=e},submit:function(){var t=this;this.queryParam.templateId?(this.isUpdate?s["a"].update(this.$route.query.sheetId,this.queryParam).then((function(e){t.$notification["success"]({message:"更新成功:"+e.data.message}),t.$router.push({name:"PageList"})})):s["a"].create(this.queryParam).then((function(e){t.$notification["success"]({message:"添加成功"+e.data.message})})),this.$router.push({name:"PageList"})):this.$notification["error"]({message:"请至少选择一个模板!!"})},showDrawer:function(){this.loadTempalte(),this.visible=!0},onClose:function(){this.visible=!1},handleChange:function(t){this.queryParam.templateId=t},loadTempalte:function(){var t=this;o["a"].findByType("SHEET").then((function(e){t.templates=e.data.data}))}}},c=u,l=(a("732d"),a("2877")),m=Object(l["a"])(c,n,r,!1,null,null,null);e["default"]=m.exports},"732d":function(t,e,a){"use strict";var n=a("eb50"),r=a.n(n);r.a},eb50:function(t,e,a){},ed66:function(t,e,a){"use strict";var n=a("9efd"),r="/api/sheet",i={list:function(){return Object(n["a"])({url:r,method:"get"})},deleteById:function(t){return Object(n["a"])({url:"".concat(r,"/delete/").concat(t),method:"get"})},generateHtml:function(t){return Object(n["a"])({url:"".concat(r,"/generate/").concat(t),method:"get"})},query:function(t){return Object(n["a"])({url:r,params:t,method:"get"})},findById:function(t){return Object(n["a"])({url:"".concat(r,"/find/").concat(t),method:"get"})},create:function(t){return Object(n["a"])({url:r,data:t,method:"post"})},update:function(t,e){return Object(n["a"])({url:"".concat(r,"/update/").concat(t),data:e,method:"post"})}};e["a"]=i}}]);
//# sourceMappingURL=PageCreate.86b262ee.js.map